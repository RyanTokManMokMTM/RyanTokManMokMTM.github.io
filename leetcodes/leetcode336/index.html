<!doctype html><html lang=zh-TW data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.128.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/customIcon/favicon.ico><link rel=icon type=image/x-icon href=/imgs/customIcon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/customIcon/favicon_16x16.png><link rel=icon type=image/png sizes=32x32 href=/imgs/customIcon/favicon_32_32.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="[Leetcode] Palindrome Pairs(Hard)"><meta itemprop=description content="簡單紀錄生活和筆記"><meta name=description content="簡單紀錄生活和筆記"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://ryantokmanmokmtm.github.io/imgs/customIcon/avatar.jpg"><meta itemprop=keywords content="array,tire Tree,string"><link href=/css/pio.css rel=stylesheet type=text/css><link type=text/css rel=stylesheet href=https://ryantokmanmokmtm.github.io/3rd/font-awesome/6.6.0/css/all.min.css><link type=text/css rel=stylesheet href=https://ryantokmanmokmtm.github.io/3rd/animate.css/4.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://ryantokmanmokmtm.github.io/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href=/css/main.min.fd06bdea3ec34c8476a794c94fe3a48bbc4be4e78e1efef59b825e62696e8c55.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"leetcode336","permalink":"https://ryantokmanmokmtm.github.io/leetcodes/leetcode336/","title":"[Leetcode] Palindrome Pairs(Hard)","waline":{"js":[{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"2.15.8"},{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>[Leetcode] Palindrome Pairs(Hard) - Jackson.tmm</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Jackson.tmm</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>Loving life and dreams.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>Home 首頁</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-list hvr-icon"></i>Menu 目錄</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>About 關於</a></li><li class="menu-item menu-item-post"><a href=/post/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>Archive 歸檔</a></li><li class="menu-item menu-item-memories"><a href=/memories class=hvr-icon-pulse rel=section><i class="fa fa-star hvr-icon"></i>Memories 回憶</a></li><li class="menu-item menu-item-leetcodes"><a href=/leetcodes class=hvr-icon-pulse rel=section><i class="fa fa-code hvr-icon"></i>Leetcodes 力扣</a></li><li class="menu-item menu-item-english"><a href=/english class=hvr-icon-pulse rel=section><i class="fa fa-language hvr-icon"></i>English 英文</a></li><li class="menu-item menu-item-project"><a href=/project class=hvr-icon-pulse rel=section><i class="fa fa-tasks hvr-icon"></i>Project 專案</a></li><li class="menu-item menu-item-books"><a href=/books class=hvr-icon-pulse rel=section><i class="fa fa-book hvr-icon"></i>Reading 閱讀區</a></li><li class="menu-item menu-item-achievement"><a href=/achievement class=hvr-icon-pulse rel=section><i class="fa fa-trophy hvr-icon"></i>Achievement 成就</a></li><li class="menu-item menu-item-resources"><a href=/resources class=hvr-icon-pulse rel=section><i class="fa fa-file hvr-icon"></i>Resources 資源</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目錄</li><li class=sidebar-nav-overview>站點概覽</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#leetcode-336---palindrome-pairs>LeetCode 336 - Palindrome Pairs</a></li><li><a href=#how-can-we-solve-this-problem>How can we solve this problem?</a><ul><li><ul><li><a href=#solution>Solution:</a></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Jackson.tmm src=/imgs/img-lazy-loading.gif data-src=/imgs/customIcon/avatar.jpg><p class=site-author-name itemprop=name>Jackson.tmm</p><div class=site-description itemprop=description>簡單紀錄生活和筆記</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/post/><span class=site-state-item-count>34</span>
<span class=site-state-item-name>日誌</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>14</span>
<span class=site-state-item-name>分類</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>57</span>
<span class=site-state-item-name>標籤</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://www.facebook.com/karot.ka.7505/ title="Facebook → https://www.facebook.com/karot.ka.7505/" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-facebook fa-fw hvr-icon"></i>
Facebook
</a></span><span class=links-of-social-item><a href=https://www.instagram.com/tm_m.0418 title="IG → https://www.instagram.com/tm_m.0418" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-instagram fa-fw hvr-icon"></i>
IG
</a></span><span class=links-of-social-item><a href=https://github.com/RyanTokManMokMTM title="Github → https://github.com/RyanTokManMokMTM" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=https://www.linkedin.com/in/jackson-moktokman/ title="LinkedIn → https://www.linkedin.com/in/jackson-moktokman/" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-linkedin fa-fw hvr-icon"></i>
LinkedIn</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知識><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知識></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa-solid fa-person-praying fa-fw"></i>
友情鏈接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://cwksc.github.io/ title=https://cwksc.github.io/ target=_blank>CWKSC 一個什麼都學得會的人</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>網站資訊</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已運行：</div><div class=item-count id=runTimes data-publishdate=2022-03-24T13:52:49+08:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>總訪客數：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>頁面瀏覽：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>總字數：</div><div class=item-count id=wordsCount data-count=53324></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>閱讀約：</div><div class=item-count id=readTimes data-times=126></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最後更新於：</div><div class=item-count id=last-push-date data-lastpushdate=2024-12-02T23:31:33+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直達評論><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深淺模式切換><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回頂部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/RyanTokManMokMTM rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://ryantokmanmokmtm.github.io/leetcodes/leetcode336/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/customIcon/avatar.jpg"><meta itemprop=name content="Jackson.tmm"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Jackson.tmm"><meta itemprop=description content="簡單紀錄生活和筆記"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="[Leetcode] Palindrome Pairs(Hard)"><meta itemprop=description content='LeetCode 336 - Palindrome Pairs Given a list of unique words, return all the pairs of the distinct indices (i, j) in the given list, so that the concatenation of the two words words[i] + words[j] is a palindrome. example Input: words = ["abcd","dcba","lls","s","sssll"] Output: [[0,1],[1,0],[3,2],[2,4]] Explanation: The palindromes are ["dcbaabcd","abcddcba","slls","llssssll"] Input: words = ["bat","tab","cat"] Output: [[0,1],[1,0]] Explanation: The palindromes are ["battab","tabbat"] How can we solve this problem? 在解'></span><header class=post-header><h1 class=post-title itemprop="name headline">[Leetcode] Palindrome Pairs(Hard)</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=發表於>發表於：
</span><time title="創建時間：2022-09-17 20:41:48 +0800 +0800" itemprop="dateCreated datePublished" datetime="2022-09-17 20:41:48 +0800 +0800">2022-09-17
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分類於>分類於：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/leetcode itemprop=url rel=index><span itemprop=name>leetcode</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字數><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字數：</span>
<span>1158</span>
</span><span class=post-meta-item title=閱讀><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>閱讀：&ap;</span>
<span>3分鐘</span>
</span><span class=post-meta-item title=瀏覽><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>瀏覽：
</span><span id=busuanzi_value_page_pv data-path=/leetcodes/leetcode336/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><h2 id=leetcode-336---palindrome-pairs>LeetCode 336 - Palindrome Pairs
<a class=header-anchor href=#leetcode-336---palindrome-pairs></a></h2><p>Given a list of <strong>unique</strong> words, return all the pairs of the <em><strong>distinct</strong></em> indices <code>(i, j)</code> in the given list, so that the concatenation of the two words <code>words[i] + words[j]</code> is a palindrome.</p><p>example</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Input: words = [&#34;abcd&#34;,&#34;dcba&#34;,&#34;lls&#34;,&#34;s&#34;,&#34;sssll&#34;]
</span></span><span style=display:flex><span>Output: [[0,1],[1,0],[3,2],[2,4]]
</span></span><span style=display:flex><span>Explanation: The palindromes are [&#34;dcbaabcd&#34;,&#34;abcddcba&#34;,&#34;slls&#34;,&#34;llssssll&#34;]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Input: words = [&#34;bat&#34;,&#34;tab&#34;,&#34;cat&#34;]
</span></span><span style=display:flex><span>Output: [[0,1],[1,0]]
</span></span><span style=display:flex><span>Explanation: The palindromes are [&#34;battab&#34;,&#34;tabbat&#34;]
</span></span></code></pre></div><h2 id=how-can-we-solve-this-problem>How can we solve this problem?
<a class=header-anchor href=#how-can-we-solve-this-problem></a></h2><p>在解這題之前我們先要知道有哪些情況是成立Palindrome。</p><ul><li>Case 1 ：2個字符串為反向字符串 - <code>"abcd""dcba"</code> => <code>"abcd|dcba"</code></li><li>Case 2 ：2個字符前中一個與另一個字符串的前面部分為<code>Palindrome</code>,剩餘未能匹配的部分也是一個
<code>Palindrome</code> - <code>"abb""hcch|bba"</code> => <code>abbhc|chbba</code></li><li>Case 3 : 2個字符的其中一個為空字符，而另外一個自己就是一個<code>Palindrome</code> - <code>"""aba"</code> => <code>"aba"</code></li></ul><p>哪我們怎麼才能知道哪些字符串是某字符串的<code>Palindrome</code>呢？<br>我們可以透過<code>Trie Tree(前綴樹)</code>來幫助進行我們匹配。</p><blockquote><p><em>注:建立樹時必須是反向的方式插入(abcd => dbca),這樣當我們進行搜尋或者匹配的時候，才知道哪些與當前字符串匹配</em></p></blockquote><p>為了能匹配出<strong>Case 2</strong>，每遍歷一個Node,都需要檢查<code>[0..j]</code>是否為<code>Palindrome</code>，如果是插入當前字符串的<code>index</code>到當前的<code>Node</code>中，以便之後的匹配步驟。另外對於空字符串而已，需要插入至<code>root</code>的<code>Node</code>。(任何本來就是一個<code>Palindrome</code>的字符串也會出現在<code>root</code>的list(<code>保存的是index</code>)中：<code>"","aba","a","bbbabbb"</code>)</p><p>建立完成以後，便可以進行匹配。當遍歷到的<code>Node</code>是一個完整的字符串而且<code>Index</code>不等於自己以及剩餘的部分是一個<code>Palindrome</code>，也就是匹配到了我們的<code>Case2</code>，並加入至<code>result</code>。重複這個過程直到，遍歷完當前字符串。但是遍歷完當前字符串，並不代表沒有其他字符串可以組成<code>Palindrome</code>。之前建立<code>Tree</code>的時候，在這個<code>Node</code>中插入<code>[0...j(當前的node)]</code>字符串為<code>Palindrome</code>的<code>index</code> list,就可以直接使用了。只要<code>index</code>不等於當前的字符串的<code>index</code>直接加入到<code>result</code>即可。(匹配<strong>Case 2</strong>或者<strong>Case 3</strong>(如果是<code>root</code>的話)`)。</p><p>透過以上這些步驟就可以解決這一題(有點難度&mldr;哈哈哈)</p><h4 id=solution>Solution:
<a class=header-anchor href=#solution></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TrieNode</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    TrieNode(){
</span></span><span style=display:flex><span>        children <span style=color:#f92672>=</span> vector<span style=color:#f92672>&lt;</span>TrieNode<span style=color:#f92672>*&gt;</span>(<span style=color:#ae81ff>26</span>,<span style=color:#66d9ef>nullptr</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> index <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#75715e>//if this variable is not -1 ,it means a word
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    vector<span style=color:#f92672>&lt;</span>TrieNode<span style=color:#f92672>*&gt;</span> children;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>//coz we are matched the prevous character a(xxx)|(rest of string is palindrome too)|(xxx)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> restPalindromeIndex;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span> palindromePairs(vector<span style=color:#f92672>&lt;</span>string<span style=color:#f92672>&gt;&amp;</span> words) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//distinct indices (i, j)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        TrieNode<span style=color:#f92672>*</span> root <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TrieNode();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;i<span style=color:#f92672>&lt;</span>words.size();i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>           BuildTrieTree(root,words[i],i);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span> res;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>//seach the palindrome
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;i<span style=color:#f92672>&lt;</span>words.size();i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>            search(res,i,words,root);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> res;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>BuildTrieTree</span>(TrieNode<span style=color:#f92672>*</span> root,string<span style=color:#f92672>&amp;</span> str,<span style=color:#66d9ef>int</span> wordIndex){
</span></span><span style=display:flex><span>        <span style=color:#75715e>//insert the string in reverse order
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        TrieNode<span style=color:#f92672>*</span> head <span style=color:#f92672>=</span> root;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> str.length()<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;i<span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>0</span>;i<span style=color:#f92672>--</span>){
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span>(isPalindrome(str,<span style=color:#ae81ff>0</span>,i)) head<span style=color:#f92672>-&gt;</span>restPalindromeIndex.push_back(wordIndex); <span style=color:#75715e>//[0..j] is a Palindrome? record the index
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span>(head<span style=color:#f92672>-&gt;</span>children[str[i] <span style=color:#f92672>-</span> <span style=color:#e6db74>&#39;a&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#66d9ef>nullptr</span>) head<span style=color:#f92672>-&gt;</span>children[str[i] <span style=color:#f92672>-</span> <span style=color:#e6db74>&#39;a&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TrieNode();
</span></span><span style=display:flex><span>            head <span style=color:#f92672>=</span> head<span style=color:#f92672>-&gt;</span>children[str[i] <span style=color:#f92672>-</span> <span style=color:#e6db74>&#39;a&#39;</span>];
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        head<span style=color:#f92672>-&gt;</span>index <span style=color:#f92672>=</span> wordIndex; <span style=color:#75715e>//after the string is inserted to the tree ,set the index
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        head<span style=color:#f92672>-&gt;</span>restPalindromeIndex.push_back(wordIndex);<span style=color:#75715e>//if empty string
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>search</span>(vector<span style=color:#f92672>&lt;</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;&amp;</span> res,<span style=color:#66d9ef>int</span> wordIdx,vector<span style=color:#f92672>&lt;</span>string<span style=color:#f92672>&gt;&amp;</span> words,TrieNode<span style=color:#f92672>*</span> root){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>root) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>        TrieNode<span style=color:#f92672>*</span> head <span style=color:#f92672>=</span> root;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;i<span style=color:#f92672>&lt;</span>words[wordIdx].length() <span style=color:#f92672>&amp;&amp;</span> head;i<span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>            <span style=color:#75715e>//find the word
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span>(head<span style=color:#f92672>-&gt;</span>index <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> head<span style=color:#f92672>-&gt;</span>index <span style=color:#f92672>!=</span> wordIdx <span style=color:#f92672>&amp;&amp;</span> isPalindrome(words[wordIdx],i,words[wordIdx].length() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>)) res.push_back({wordIdx,head<span style=color:#f92672>-&gt;</span>index});
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            head <span style=color:#f92672>=</span> head<span style=color:#f92672>-&gt;</span>children[words[wordIdx][i] <span style=color:#f92672>-</span> <span style=color:#e6db74>&#39;a&#39;</span>];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>//if there is no any character ,return it
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>head) <span style=color:#66d9ef>return</span>; 
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>//we need to add all string that is palindrome from [head(character to 0]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//for example : str is aab and any string has same baa at the back
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//aab|(if sub string is palindrome with postfix (baa))
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//if can make as a Palindrome Pairs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//aab|(aba)baa =&gt; aaba b abaa =&gt; YES
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//aab|(cbc)baa =&gt; aabc b cbaa =&gt; YES
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//aab|(abba)baa =&gt; aabab babaa =&gt; YES
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>auto</span> index : head<span style=color:#f92672>-&gt;</span>restPalindromeIndex) <span style=color:#66d9ef>if</span>(index <span style=color:#f92672>!=</span> wordIdx) res.push_back({wordIdx,index}); <span style=color:#75715e>//distinct i and j
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>isPalindrome</span>(string<span style=color:#f92672>&amp;</span> str,<span style=color:#66d9ef>int</span> l, <span style=color:#66d9ef>int</span> r){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span>(l <span style=color:#f92672>&lt;</span> r <span style=color:#f92672>&amp;&amp;</span> str[l] <span style=color:#f92672>==</span> str[r]){
</span></span><span style=display:flex><span>            l<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>            r<span style=color:#f92672>--</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> l <span style=color:#f92672>&gt;=</span> r;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div></div><footer class=post-footer><div class=post-tags><a href=/tags/array>array
</a><a href=/tags/tire-tree>tire Tree
</a><a href=/tags/string>string</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知識><ul><li class=post-copyright-title><strong>文章標題：</strong>
[Leetcode] Palindrome Pairs(Hard)</li><li class=post-copyright-author><strong>本文作者： </strong>Jackson.tmm</li><li class=post-copyright-link><strong>本文鏈接：</strong>
<a id=post-cr-link href=https://ryantokmanmokmtm.github.io/leetcodes/leetcode336/ title="[Leetcode] Palindrome Pairs(Hard)">https://ryantokmanmokmtm.github.io/leetcodes/leetcode336/</a></li><li class=post-copyright-license><strong>版權聲明： </strong>本博客所有文章除特別聲明外，均採用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 許可協議。轉載請註明出處！</li></ul></div><div class=followme><span>歡迎關注我的其它發布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=https://www.instagram.com/tm_m.0418/><span class=icon><i class="fab fa-instagram"></i>
</span><span class=label>Instagram</span></a></div><div class=social-item><a target=_blank class=social-link href=https://www.linkedin.com/in/jackson-moktokman><span class=icon><i class="fab fa-linkedin"></i>
</span><span class=label>LinkedIn</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/leetcodes/leetcode42/ rel=next title="[Leetcode] Trapping Rain Water(Hard)"><i class="fa fa-chevron-left"></i> [Leetcode] Trapping Rain Water(Hard)</a></div><div class="post-nav-prev post-nav-item"><a href=/leetcodes/leetcode1770/ rel=prev title="[Leetcode] Maximum Score from Performing Multiplication Operations(Medium)">[Leetcode] Maximum Score from Performing Multiplication Operations(Medium)
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span></span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=utterances-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2022 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Jackson.tmm</span></div><div class=vendors-list><a target=_blank href=https://github.com title=Github><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/github.svg alt=Github>
</a><span>提供CDN/雲資源支持</span></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.0.min.js></script><div class="pio-container left"><div class=pio-action></div><canvas id=pio width=300 height=500></canvas></div></div><div class=elfsight-app-b04b61d3-ff26-4d9d-a289-163c1b59bd32 data-elfsight-app-lazy></div></div></footer><script type=text/javascript src=https://ryantokmanmokmtm.github.io/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://ryantokmanmokmtm.github.io/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#333","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://ryantokmanmokmtm.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小時前","ds_hours":" 小時 ","ds_just":"剛剛","ds_min":" 分鐘前","ds_mins":" 分鐘","ds_month":" 個月前","ds_years":" 年 ","empty":"沒有找到任何搜索結果：${query}","hits":"找到 ${hits} 個搜索結果","hits_time":"找到 ${hits} 個搜索結果（用時 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-TW","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"utterances":{"cfg":{"issueterm":"pathname","label":"comments","repo":"RyanTokManMokMTM/RyanTokManMokMTM.github.io","theme":"github-light"},"js":"https://utteranc.es/client.js"},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://ryantokmanmokmtm.github.io/3rd"}},"version":"4.6.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o \n\n可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄\n(Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src=/js/main.min.5494f0e871d0c594b5d9f96f5d5e3bc7441306a5cf0570aae5847646c0b96e52.js defer></script><script src=https://static.elfsight.com/platform/platform.js data-use-service-core defer></script><script src=/js/l2d.js></script><script src=/js/pio.js></script><script>var pio=new Paul_Pio({mode:"draggable",hidden:!0,content:{welcome:["歡迎來到Jackson的小宇宙！","今天天氣不錯，一起来玩吧！","博主有空的話，會寫一寫博客記錄一下!"],custom:[{selector:".home-social a:last-child",text:"在這里可以了解博主的日常噢~"},{selector:".post-item a",type:"read"},{selector:".post-content a, .page-content a",type:"link"}]},model:["/model/umaru/model.json","/model/tororo/tororo.model.json","/model/HN/nepmaid/model.json","/model/HN/nepgearswim/model.json","/model/HN/neptune_santa/model.json","/model/other/rem/model.json","/model/other/mei/model.json","/model/other/liang/2.json","/model/HN/noir_santa/model.json","/model/HN/noireswim/model.json","/model/other/blanc_normal/index.json","/model/other/88type_1809/normal/model.json","/model/other/88type_1809/destroy/model.json","/model/other/dsr50_1801/normal/model.json","/model/other/dsr50_1801/destroy/model.json","/model/other/g36c_1202/normal/model.json","/model/other/g36c_1202/destroy/model.json","/model/other/kp31_310/normal/model.json","/model/other/kp31_310/destroy/model.json","/model/other/kp31_1103/normal/model.json","/model/other/kp31_1103/destroy/model.json"],touch:["不可以這樣欺負我啦><"]})</script></body></html>